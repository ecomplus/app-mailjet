{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "title": "Orders",
  "description": "Order object model",
  "type": "object",
  "required": ["amount"],
  "additionalProperties": false,
  "definitions": {
    "address": {
      "type": "object",
      "additionalProperties": false,
      "required": ["zip"],
      "properties": {
        "zip": {
          "type": "string",
          "maxLength": 30,
          "description": "ZIP (CEP, postal...) code"
        },
        "street": {
          "type": "string",
          "maxLength": 200,
          "description": "Street or public place name"
        },
        "number": {
          "type": "integer",
          "min": 1,
          "max": 9999999,
          "description": "House or building street number"
        },
        "complement": {
          "type": "string",
          "maxLength": 100,
          "description": "Address complement or second line, such as apartment number"
        },
        "borough": {
          "type": "string",
          "maxLength": 100,
          "description": "Borough name"
        },
        "near_to": {
          "type": "string",
          "maxLength": 100,
          "description": "Some optional other reference for this address"
        },
        "line_address": {
          "type": "string",
          "maxLength": 255,
          "description": "Full in line mailing address, should include street, number and borough"
        },
        "city": {
          "type": "string",
          "maxLength": 100,
          "description": "City name"
        },
        "country": {
          "type": "string",
          "maxLength": 50,
          "description": "Country name"
        },
        "country_code": {
          "type": "string",
          "minLength": 2,
          "maxLength": 2,
          "pattern": "^[A-Z]+$",
          "description": "An ISO 3166-2 country code"
        },
        "province": {
          "type": "string",
          "maxLength": 100,
          "description": "Province or state name"
        },
        "province_code": {
          "type": "string",
          "minLength": 2,
          "maxLength": 2,
          "pattern": "^[A-Z]+$",
          "description": "The two-letter code for the province or state"
        },
        "name": {
          "type": "string",
          "maxLength": 70,
          "description": "The name of recipient, generally is the customer's name"
        },
        "last_name": {
          "type": "string",
          "maxLength": 70,
          "description": "The recipient's last name"
        },
        "phone": {
          "type": "object",
          "additionalProperties": false,
          "required": ["number"],
          "properties": {
            "country_code": {
              "type": "integer",
              "min": 1,
              "max": 999,
              "description": "Country calling code (without +), defined by standards E.123 and E.164"
            },
            "number": {
              "type": "string",
              "maxLength": 19,
              "pattern": "^[0-9]+$",
              "description": "The actual phone number, digits only"
            }
          },
          "description": "Customer phone number for this mailing address"
        }
      },
      "description": "Address object"
    }
  },
  "properties": {
    "staff_signature": {
      "type": "boolean",
      "default": false,
      "description": "Whether order was created by staff and is trusted"
    },
    "checkout_link": {
      "type": "string",
      "maxLength": 255,
      "format": "uri",
      "description": "URL to checkout page, if necessary, use (_id) where order unique ID must appear at URL"
    },
    "checkout_mobile_link": {
      "type": "string",
      "maxLength": 255,
      "format": "uri",
      "description": "Optional checkout URL specific to mobile devices"
    },
    "status_link": {
      "type": "string",
      "maxLength": 255,
      "format": "uri",
      "description": "URL to order status page, if necessary, use (_id) where order unique ID must appear"
    },
    "status_mobile_link": {
      "type": "string",
      "maxLength": 255,
      "format": "uri",
      "description": "Optional status URL specific to mobile devices"
    },
    "utm": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "source": {
          "type": "string",
          "maxLength": 100,
          "description": "Parameter \"utm_source\", the referrer: (e.g. google, newsletter)"
        },
        "medium": {
          "type": "string",
          "maxLength": 100,
          "description": "Parameter \"utm_medium\", the marketing medium: (e.g. cpc, banner, email)"
        },
        "campaign": {
          "type": "string",
          "maxLength": 200,
          "description": "Parameter \"utm_campaign\", the product, promo code, or slogan (e.g. spring_sale)"
        },
        "term": {
          "type": "string",
          "maxLength": 100,
          "description": "Parameter \"utm_term\", identifies the paid keywords"
        },
        "content": {
          "type": "string",
          "maxLength": 255,
          "description": "Parameter \"utm_content\", used to differentiate ads"
        }
      },
      "description": "UTM campaign HTTP parameters"
    },
    "referring_site": {
      "type": "string",
      "maxLength": 255,
      "format": "uri",
      "description": "The website that the customer clicked on to come to the shop"
    },
    "affiliate_code": {
      "type": "string",
      "maxLength": 200,
      "description": "Code to identify the affiliate that referred the customer"
    },
    "source_name": {
      "type": "string",
      "maxLength": 30,
      "default": "Web",
      "description": "Where the order originated"
    },
    "browser_ip": {
      "type": "string",
      "maxLength": 50,
      "description": "IP address of the browser used by the customer when placing the order"
    },
    "channel_id": {
      "type": "integer",
      "min": 10000,
      "max": 4294967295,
      "description": "Channel unique identifier"
    },
    "channel_type": {
      "type": "string",
      "enum": ["ecommerce", "mobile", "pos", "button", "facebook", "chatbot"],
      "default": "ecommerce",
      "description": "Channel type or source"
    },
    "domain": {
      "type": "string",
      "minLength": 4,
      "maxLength": 100,
      "pattern": "^[0-9a-z-.]+$",
      "description": "Store domain name (numbers and lowercase letters, eg.: www.myshop.sample)"
    },
    "number": {
      "type": "integer",
      "min": 1,
      "max": 999999999,
      "description": "Order number, if not specified will be filled auto incrementing"
    },
    "code": {
      "type": "string",
      "maxLength": 70,
      "description": "Order code used by seller and customer for identification, should be unique"
    },
    "status": {
      "type": "string",
      "enum": ["open", "closed", "cancelled"],
      "default": "open",
      "description": "Order main status"
    },
    "opened_at": {
      "type": "string",
      "format": "date-time",
      "description": "Date and time when order was opened, in ISO 8601 standard representation"
    },
    "closed_at": {
      "type": "string",
      "format": "date-time",
      "description": "If the order is closed, specify the date and time it occurred"
    },
    "cancelled_at": {
      "type": "string",
      "format": "date-time",
      "description": "If the order is cancelled, specify the date and time it occurred"
    },
    "cancel_reason": {
      "type": "string",
      "enum": ["customer", "fraud", "inventory", "declined", "other"],
      "description": "If the order is cancelled, specify the reason why it was cancelled"
    },
    "seller_status": {
      "type": "string",
      "maxLength": 50,
      "description": "Order status created by seller"
    },
    "financial_status": {
      "type": "object",
      "additionalProperties": false,
      "required": ["current"],
      "properties": {
        "updated_at": {
          "type": "string",
          "format": "date-time",
          "description": "Last status change, date and time in ISO 8601 standard representation"
        },
        "current": {
          "type": "string",
          "enum": [
            "pending",
            "under_analysis",
            "authorized",
            "unauthorized",
            "partially_paid",
            "paid",
            "in_dispute",
            "partially_refunded",
            "refunded",
            "voided",
            "unknown"
          ],
          "description": "Order financial status"
        },
        "notified_admins": {
          "type": "array",
          "uniqueItems": true,
          "maxItems": 200,
          "items": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Authentication ID"
          },
          "description": "List of administrators that already seen current status change"
        },
        "flags": {
          "type": "array",
          "uniqueItems": true,
          "maxItems": 10,
          "items": {
            "type": "string",
            "maxLength": 25,
            "description": "Flag title"
          },
          "description": "Flags to associate additional info"
        }
      },
      "description": "Financial status and date of change"
    },
    "fulfillment_status": {
      "type": "object",
      "additionalProperties": false,
      "required": ["current"],
      "properties": {
        "updated_at": {
          "type": "string",
          "format": "date-time",
          "description": "Last status change, date and time in ISO 8601 standard representation"
        },
        "current": {
          "type": "string",
          "enum": [
            "invoice_issued",
            "in_production",
            "in_separation",
            "ready_for_shipping",
            "partially_shipped",
            "shipped",
            "partially_delivered",
            "delivered",
            "returned_for_exchange",
            "received_for_exchange",
            "returned"
          ],
          "description": "Order fulfillment (shipping) status"
        },
        "notified_admins": {
          "type": "array",
          "uniqueItems": true,
          "maxItems": 200,
          "items": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Authentication ID"
          },
          "description": "List of administrators that already seen current status change"
        },
        "flags": {
          "type": "array",
          "uniqueItems": true,
          "maxItems": 10,
          "items": {
            "type": "string",
            "maxLength": 25,
            "description": "Flag title"
          },
          "description": "Flags to associate additional info"
        }
      },
      "description": "Fulfillment status and date of change"
    },
    "currency_id": {
      "type": "string",
      "pattern": "^[A-Z]{3}$",
      "default": "BRL",
      "description": "Designator of currency according to ISO 4217 (3 uppercase letters)"
    },
    "currency_symbol": {
      "type": "string",
      "maxLength": 20,
      "default": "R$",
      "description": "Graphic symbol used as a shorthand for currency's name"
    },
    "amount": {
      "type": "object",
      "additionalProperties": false,
      "required": ["total"],
      "properties": {
        "total": {
          "type": "number",
          "minimum": 0,
          "maximum": 9999999999,
          "description": "Order total amount"
        },
        "subtotal": {
          "type": "number",
          "minimum": 0,
          "maximum": 9999999999,
          "description": "The sum of all items prices"
        },
        "freight": {
          "type": "number",
          "minimum": 0,
          "maximum": 9999999999,
          "description": "Order freight cost"
        },
        "discount": {
          "type": "number",
          "minimum": 0,
          "maximum": 9999999999,
          "description": "Final discount value applied"
        },
        "tax": {
          "type": "number",
          "minimum": 0,
          "maximum": 9999999999,
          "description": "The sum of all the taxes applied to the order"
        },
        "extra": {
          "type": "number",
          "minimum": 0,
          "maximum": 9999999999,
          "description": "Sum of optional extra costs applied"
        }
      },
      "description": "Object with sums of values"
    },
    "payment_method_label": {
      "type": "string",
      "maxLength": 100,
      "description": "Name or summary of order payment method(s)"
    },
    "shipping_method_label": {
      "type": "string",
      "maxLength": 100,
      "description": "Name of order shipping method(s)"
    },
    "buyers": {
      "type": "array",
      "maxItems": 20,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Customer ID"
          },
          "locale": {
            "type": "string",
            "pattern": "^[a-z]{2}(_[a-z]{2})?$",
            "description": "Customer language two letter code, sometimes with region, eg.: pt_br, fr, en_us"
          },
          "main_email": {
            "type": "string",
            "maxLength": 200,
            "format": "email",
            "description": "Customer main email address"
          },
          "emails": {
            "type": "array",
            "maxItems": 20,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["address"],
              "properties": {
                "address": {
                  "type": "string",
                  "maxLength": 200,
                  "format": "email",
                  "description": "The actual email address"
                },
                "type": {
                  "type": "string",
                  "enum": ["work", "home", "other"],
                  "description": "The type of email"
                },
                "verified": {
                  "type": "boolean",
                  "default": false,
                  "description": "States whether or not the email address has been verified"
                }
              },
              "description": "Email object"
            },
            "description": "List of customer email addresses"
          },
          "display_name": {
            "type": "string",
            "maxLength": 50,
            "description": "The name of this Customer, suitable for display"
          },
          "name": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "family_name": {
                "type": "string",
                "maxLength": 70,
                "description": "The family name of this user, or \"last name\""
              },
              "given_name": {
                "type": "string",
                "maxLength": 70,
                "description": "The \"first name\" of this user"
              },
              "middle_name": {
                "type": "string",
                "maxLength": 255,
                "description": "The middle name(s) of this user"
              }
            },
            "description": "Customer name object"
          },
          "gender": {
            "type": "string",
            "enum": ["f", "m", "x"],
            "description": "Customer gender, female, male or third gender (X)"
          },
          "photos": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 20,
            "items": {
              "type": "string",
              "maxLength": 255,
              "description": "Image URL"
            },
            "description": "User profile pictures"
          },
          "phones": {
            "type": "array",
            "maxItems": 20,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["number"],
              "properties": {
                "country_code": {
                  "type": "integer",
                  "min": 1,
                  "max": 999,
                  "description": "Country calling code (without +), defined by standards E.123 and E.164"
                },
                "number": {
                  "type": "string",
                  "maxLength": 19,
                  "pattern": "^[0-9]+$",
                  "description": "The actual phone number, digits only"
                },
                "type": {
                  "type": "string",
                  "enum": ["home", "personal", "work", "other"],
                  "description": "The type of phone"
                }
              },
              "description": "Phone object"
            },
            "description": "List of customer phone numbers"
          },
          "registry_type": {
            "type": "string",
            "enum": ["p", "j"],
            "description": "Physical or juridical (company) person"
          },
          "doc_country": {
            "type": "string",
            "minLength": 2,
            "maxLength": 2,
            "pattern": "^[A-Z]+$",
            "description": "Country of document origin, an ISO 3166-2 code"
          },
          "doc_number": {
            "type": "string",
            "maxLength": 19,
            "pattern": "^[0-9]+$",
            "description": "Responsible person or organization document number (only numbers)"
          },
          "inscription_type": {
            "type": "string",
            "enum": ["State", "Municipal"],
            "description": "Municipal or state registration if exists"
          },
          "inscription_number": {
            "type": "string",
            "maxLength": 50,
            "description": "Municipal or state registration number (with characters) if exists"
          },
          "corporate_name": {
            "type": "string",
            "maxLength": 255,
            "description": "Registered company name or responsible fullname"
          }
        },
        "description": "Customer object"
      },
      "description": "List of order customers"
    },
    "gift_to": {
      "type": "array",
      "maxItems": 20,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Customer ID"
          },
          "locale": {
            "type": "string",
            "pattern": "^[a-z]{2}(_[a-z]{2})?$",
            "description": "Customer language two letter code, sometimes with region, eg.: pt_br, fr, en_us"
          },
          "main_email": {
            "type": "string",
            "maxLength": 200,
            "format": "email",
            "description": "Customer main email address"
          },
          "emails": {
            "type": "array",
            "maxItems": 20,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["address"],
              "properties": {
                "address": {
                  "type": "string",
                  "maxLength": 200,
                  "format": "email",
                  "description": "The actual email address"
                },
                "type": {
                  "type": "string",
                  "enum": ["work", "home", "other"],
                  "description": "The type of email"
                },
                "verified": {
                  "type": "boolean",
                  "default": false,
                  "description": "States whether or not the email address has been verified"
                }
              },
              "description": "Email object"
            },
            "description": "List of customer email addresses"
          },
          "display_name": {
            "type": "string",
            "maxLength": 50,
            "description": "The name of this Customer, suitable for display"
          },
          "name": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "family_name": {
                "type": "string",
                "maxLength": 70,
                "description": "The family name of this user, or \"last name\""
              },
              "given_name": {
                "type": "string",
                "maxLength": 70,
                "description": "The \"first name\" of this user"
              },
              "middle_name": {
                "type": "string",
                "maxLength": 255,
                "description": "The middle name(s) of this user"
              }
            },
            "description": "Customer name object"
          },
          "gender": {
            "type": "string",
            "enum": ["f", "m", "x"],
            "description": "Customer gender, female, male or third gender (X)"
          },
          "photos": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 20,
            "items": {
              "type": "string",
              "maxLength": 255,
              "description": "Image URL"
            },
            "description": "User profile pictures"
          },
          "phones": {
            "type": "array",
            "maxItems": 20,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["number"],
              "properties": {
                "country_code": {
                  "type": "integer",
                  "min": 1,
                  "max": 999,
                  "description": "Country calling code (without +), defined by standards E.123 and E.164"
                },
                "number": {
                  "type": "string",
                  "maxLength": 19,
                  "pattern": "^[0-9]+$",
                  "description": "The actual phone number, digits only"
                },
                "type": {
                  "type": "string",
                  "enum": ["home", "personal", "work", "other"],
                  "description": "The type of phone"
                }
              },
              "description": "Phone object"
            },
            "description": "List of customer phone numbers"
          },
          "gifts_list_info": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "title": {
                "type": "string",
                "maxLength": 100,
                "description": "Title for the gifts list, generally defined by the customer"
              },
              "description": {
                "type": "string",
                "maxLength": 255,
                "description": "Short text description for the gifts list"
              },
              "permalink": {
                "type": "string",
                "maxLength": 255,
                "format": "uri",
                "description": "URL to gifts list page"
              },
              "event_date": {
                "type": "string",
                "format": "date-time",
                "description": "Date and time of the event in ISO 8601 standard representation"
              },
              "valid_thru": {
                "type": "string",
                "format": "date-time",
                "description": "Validity of the list, until this date the gifts can be bought"
              },
              "authors": {
                "type": "array",
                "uniqueItems": true,
                "maxItems": 10,
                "items": {
                  "type": "string",
                  "maxLength": 70,
                  "description": "Author name"
                },
                "description": "Authors of the list, if it is a wedding list, the names of the bride and groom"
              },
              "notification_email": {
                "type": "string",
                "maxLength": 200,
                "format": "email",
                "description": "Email address to be notified after gift purchase"
              },
              "contact": {
                "type": "string",
                "maxLength": 200,
                "description": "Email address or phone number to contact list owners"
              }
            },
            "description": "Informations about this customer gifts list"
          }
        },
        "description": "Customer object"
      },
      "description": "If order is originated from a gifts list, specify customers who will receive the gift"
    },
    "budget_only": {
      "type": "boolean",
      "default": false,
      "description": "Whether the order is only budget, without payment transactions"
    },
    "shipping_lines": {
      "type": "array",
      "maxItems": 100,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id", "from", "to"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Unique ID (ObjectID)"
          },
          "from": {
            "$ref": "#/definitions/address",
            "description": "Sender's address"
          },
          "to": {
            "$ref": "#/definitions/address",
            "description": "Shipping address (recipient)"
          },
          "package": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "dimensions": {
                "type": "object",
                "additionalProperties": false,
                "patternProperties": {
                  "^width|height|length$": {
                    "type": "object",
                    "required": ["value"],
                    "additionalProperties": false,
                    "properties": {
                      "value": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 999999,
                        "description": "Size in specified unit"
                      },
                      "unit": {
                        "type": "string",
                        "enum": ["mm", "cm", "m", "ft", "in", "yd", "mi"],
                        "default": "cm",
                        "description": "Unit of measurement"
                      }
                    },
                    "description": "Package width, height and length"
                  }
                },
                "description": "Package dimensions"
              },
              "weight": {
                "type": "object",
                "required": ["value"],
                "additionalProperties": false,
                "properties": {
                  "value": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 999999,
                    "description": "Size in specified unit"
                  },
                  "unit": {
                    "type": "string",
                    "enum": ["mg", "g", "kg", "lb", "oz"],
                    "default": "g",
                    "description": "Unit of measurement"
                  }
                },
                "description": "Package weight for freight calculation"
              }
            },
            "description": "Shipping object information"
          },
          "app": {
            "type": "object",
            "additionalProperties": false,
            "required": ["_id"],
            "properties": {
              "_id": {
                "type": "string",
                "pattern": "^[a-f0-9]{24}$",
                "description": "Application ID"
              },
              "label": {
                "type": "string",
                "maxLength": 50,
                "description": "Name of shipping method shown to customers"
              },
              "carrier": {
                "type": "string",
                "maxLength": 200,
                "description": "Carrier name"
              },
              "carrier_doc_number": {
                "type": "string",
                "maxLength": 19,
                "pattern": "^[0-9]+$",
                "description": "Carrier document number (only numbers)"
              },
              "service_name": {
                "type": "string",
                "maxLength": 70,
                "description": "Name of service (shipping method) defined by carrier"
              },
              "service_code": {
                "type": "string",
                "maxLength": 70,
                "description": "Code of service defined by carrier"
              },
              "contract": {
                "type": "string",
                "maxLength": 70,
                "description": "Contract number of the shop with carrier, if exists"
              },
              "icon": {
                "type": "string",
                "maxLength": 255,
                "format": "uri",
                "description": "Shipping method icon image URI"
              },
              "tracking_url": {
                "type": "string",
                "maxLength": 255,
                "format": "uri",
                "description": "URI to carrier website to get package tracking status"
              }
            },
            "description": "Shipping method (by application) chosen by customer"
          },
          "pick_up": {
            "type": "string",
            "enum": ["store", "locker", "point", "other"],
            "description": "Pick up option when no (or optional) freight"
          },
          "price": {
            "type": "number",
            "minimum": 0,
            "maximum": 9999999999,
            "description": "Freight cost for this shipping line, without additionals"
          },
          "declared_value": {
            "type": "number",
            "minimum": 0,
            "maximum": 9999999999,
            "description": "The package value declared to carrier, generally the sum of all items prices"
          },
          "declared_value_price": {
            "type": "number",
            "minimum": 0,
            "maximum": 999999,
            "description": "Cost for the \"declared value\" additional service"
          },
          "own_hand": {
            "type": "boolean",
            "default": false,
            "description": "Whether the package must be delivered with additional service \"own hand\""
          },
          "own_hand_price": {
            "type": "number",
            "minimum": 0,
            "maximum": 999999,
            "description": "Cost for the \"own hand\" additional service"
          },
          "receipt": {
            "type": "boolean",
            "default": false,
            "description": "If the package will be delivered with acknowledgment of receipt"
          },
          "receipt_price": {
            "type": "number",
            "minimum": 0,
            "maximum": 999999,
            "description": "Cost for the \"acknowledgment of receipt\" additional service"
          },
          "other_additionals": {
            "type": "array",
            "maxItems": 30,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["label"],
              "properties": {
                "tag": {
                  "type": "string",
                  "maxLength": 20,
                  "pattern": "^[a-z0-9_]+$",
                  "description": "Tag to identify object, use only lowercase letters, digits and underscore"
                },
                "label": {
                  "type": "string",
                  "maxLength": 50,
                  "description": "Name of the additional service"
                },
                "price": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 999999,
                  "description": "Cost for this additional service"
                }
              },
              "description": "Additional service"
            },
            "description": "List of other additional services for this shipping line"
          },
          "taxes": {
            "type": "array",
            "maxItems": 30,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["label"],
              "properties": {
                "tag": {
                  "type": "string",
                  "maxLength": 20,
                  "pattern": "^[a-z0-9_]+$",
                  "description": "Tag to identify object, use only lowercase letters, digits and underscore"
                },
                "label": {
                  "type": "string",
                  "maxLength": 50,
                  "description": "Tax title"
                },
                "price": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 999999999,
                  "description": "Tax value applied"
                },
                "rate": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100,
                  "description": "Tax rate as a function of package value"
                }
              },
              "description": "Applied tax or additional service"
            },
            "description": "List of taxes or other additional services for this shipping line"
          },
          "discount": {
            "type": "number",
            "minimum": -999999999,
            "maximum": 999999999,
            "description": "Discount on shipping price, negative if value was additionated (not discounted)"
          },
          "total_price": {
            "type": "number",
            "minimum": 0,
            "maximum": 9999999999,
            "description": "Total cost for this shipping line, with additionals and taxes"
          },
          "posting_deadline": {
            "type": "object",
            "required": ["days"],
            "additionalProperties": false,
            "properties": {
              "days": {
                "type": "integer",
                "minimum": 0,
                "maximum": 999999,
                "description": "Number of days to post the product after purchase"
              },
              "working_days": {
                "type": "boolean",
                "default": true,
                "description": "If the deadline is calculated in working days"
              },
              "after_approval": {
                "type": "boolean",
                "default": true,
                "description": "Whether days will be counted after payment approval"
              }
            },
            "description": "Deadline for sending the package"
          },
          "delivery_time": {
            "type": "object",
            "required": ["days"],
            "additionalProperties": false,
            "properties": {
              "days": {
                "type": "integer",
                "minimum": 0,
                "maximum": 999999,
                "description": "Number of days for delivery after shipping"
              },
              "working_days": {
                "type": "boolean",
                "default": true,
                "description": "If the deadline is calculated in working days"
              }
            },
            "description": "Estimated delivery time"
          },
          "scheduled_delivery": {
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
              "^start|end$": {
                "type": "string",
                "format": "date-time",
                "description": "Scheduled date and time on the ISO 8601 representation"
              }
            },
            "description": "Date range when delivery will be made"
          },
          "delivery_instructions": {
            "type": "string",
            "maxLength": 1000,
            "description": "Additional text instructions for pick up or custom delivery process"
          },
          "tracking_codes": {
            "type": "array",
            "maxItems": 30,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["code"],
              "properties": {
                "tag": {
                  "type": "string",
                  "maxLength": 20,
                  "pattern": "^[a-z0-9_]+$",
                  "description": "Tag to identify object, use only lowercase letters, digits and underscore"
                },
                "code": {
                  "type": "string",
                  "maxLength": 70,
                  "description": "Tracking code string"
                },
                "link": {
                  "type": "string",
                  "maxLength": 255,
                  "format": "uri",
                  "description": "URI for carrier website to get the tracking status with this code"
                }
              },
              "description": "Tracking code object"
            },
            "description": "List of codes for delivery status follow-up"
          },
          "invoices": {
            "type": "array",
            "maxItems": 30,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["number"],
              "properties": {
                "issuer": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "doc_number": {
                      "type": "string",
                      "maxLength": 19,
                      "pattern": "^[0-9]+$",
                      "description": "Organization document number (only numbers)"
                    },
                    "inscription_type": {
                      "type": "string",
                      "enum": ["State", "Municipal"],
                      "description": "Municipal or state registration if exists"
                    },
                    "inscription_number": {
                      "type": "string",
                      "maxLength": 50,
                      "description": "Municipal or state registration number (with characters) if exists"
                    },
                    "corporate_name": {
                      "type": "string",
                      "maxLength": 255,
                      "description": "Registered company name"
                    }
                  },
                  "description": "Company that issued this invoice, usually the store company"
                },
                "number": {
                  "type": "string",
                  "maxLength": 200,
                  "description": "Invoice number"
                },
                "serial_number": {
                  "type": "string",
                  "maxLength": 200,
                  "description": "Invoice serial number"
                },
                "issued_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Date and time of issue, in ISO 8601 standard representation"
                },
                "link": {
                  "type": "string",
                  "maxLength": 255,
                  "format": "uri",
                  "description": "URI to invoice file"
                },
                "access_key": {
                  "type": "string",
                  "maxLength": 200,
                  "description": "Invoice access key (BR)"
                },
                "link_danfe": {
                  "type": "string",
                  "maxLength": 255,
                  "format": "uri",
                  "description": "URI to DANFE (BR)"
                }
              },
              "description": "Issued invoice"
            },
            "description": "List of invoices"
          },
          "status": {
            "type": "object",
            "additionalProperties": false,
            "required": ["current"],
            "properties": {
              "updated_at": {
                "type": "string",
                "format": "date-time",
                "description": "Last status change, date and time in ISO 8601 standard representation"
              },
              "current": {
                "type": "string",
                "enum": [
                  "invoice_issued",
                  "in_production",
                  "in_separation",
                  "ready_for_shipping",
                  "shipped",
                  "delivered",
                  "returned_for_exchange",
                  "received_for_exchange",
                  "returned"
                ],
                "description": "Shipping status"
              }
            },
            "description": "Fulfillment status and date of change"
          },
          "warehouse_code": {
            "type": "string",
            "pattern": "^[A-Za-z0-9-_]{2,30}$",
            "description": "For multi DC, set warehouse where the stock will be handled"
          },
          "items": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 3000,
            "items": {
              "type": "string",
              "pattern": "^[a-f0-9]{24}$",
              "description": "Item ID"
            },
            "description": "List of order items related with this shipping line, use only if items are divided"
          },
          "flags": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 10,
            "items": {
              "type": "string",
              "maxLength": 25,
              "description": "Flag title"
            },
            "description": "Flags to associate additional info"
          },
          "custom_fields": {
            "type": "array",
            "maxItems": 10,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["field", "value"],
              "properties": {
                "field": {
                  "type": "string",
                  "maxLength": 50,
                  "description": "Field name"
                },
                "value": {
                  "type": "string",
                  "maxLength": 255,
                  "description": "Field value"
                }
              },
              "description": "Custom field object"
            },
            "description": "List of custom fields"
          },
          "notes": {
            "type": "string",
            "maxLength": 2000,
            "description": "Optional notes with additional info about this shipping line"
          }
        },
        "description": "Order shipping method"
      },
      "description": "List of shipping methods and address for this order"
    },
    "transactions": {
      "type": "array",
      "maxItems": 100,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id", "payment_method", "amount"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Unique ID (ObjectID)"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Date and time of transaction creation, in ISO 8601 standard representation"
          },
          "type": {
            "type": "string",
            "enum": ["payment", "recurrence"],
            "default": "payment",
            "description": "Transaction type"
          },
          "payment_method": {
            "type": "object",
            "required": ["code"],
            "additionalProperties": false,
            "properties": {
              "code": {
                "type": "string",
                "enum": [
                  "credit_card",
                  "banking_billet",
                  "online_debit",
                  "account_deposit",
                  "debit_card",
                  "balance_on_intermediary",
                  "loyalty_points",
                  "other"
                ],
                "description": "Standardized payment method code"
              },
              "name": {
                "type": "string",
                "maxLength": 200,
                "description": "Short description for payment method"
              }
            },
            "description": "Payment method object"
          },
          "payment_link": {
            "type": "string",
            "maxLength": 1000,
            "format": "uri",
            "description": "Direct link to pay current transaction"
          },
          "payment_instructions": {
            "type": "string",
            "maxLength": 1000,
            "description": "Additional text instructions for manual payments"
          },
          "payer": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "fullname": {
                "type": "string",
                "maxLength": 255,
                "description": "Payer full name or company corporate name"
              },
              "birth_date": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "day": {
                    "type": "integer",
                    "min": 1,
                    "max": 31,
                    "description": "Day of birth"
                  },
                  "month": {
                    "type": "integer",
                    "min": 1,
                    "max": 12,
                    "description": "Number of month of birth"
                  },
                  "year": {
                    "type": "integer",
                    "min": 1800,
                    "max": 2200,
                    "description": "Year of birth"
                  }
                },
                "description": "Date of payer birth"
              },
              "phone": {
                "type": "object",
                "additionalProperties": false,
                "required": ["number"],
                "properties": {
                  "country_code": {
                    "type": "integer",
                    "min": 1,
                    "max": 999,
                    "description": "Country calling code (without +), defined by standards E.123 and E.164"
                  },
                  "number": {
                    "type": "string",
                    "maxLength": 19,
                    "pattern": "^[0-9]+$",
                    "description": "The actual phone number, digits only"
                  },
                  "type": {
                    "type": "string",
                    "enum": ["home", "personal", "work", "other"],
                    "description": "The type of phone"
                  }
                },
                "description": "Payer contact phone"
              },
              "registry_type": {
                "type": "string",
                "enum": ["p", "j"],
                "description": "Physical or juridical (company) person"
              },
              "doc_country": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "pattern": "^[A-Z]+$",
                "description": "Country of document origin, an ISO 3166-2 code"
              },
              "doc_number": {
                "type": "string",
                "maxLength": 19,
                "pattern": "^[0-9]+$",
                "description": "Responsible person or organization document number (only numbers)"
              }
            },
            "description": "Transation payer info"
          },
          "billing_address": {
            "$ref": "#/definitions/address",
            "description": "The mailing address associated with the payment method"
          },
          "app": {
            "type": "object",
            "additionalProperties": false,
            "required": ["_id"],
            "properties": {
              "_id": {
                "type": "string",
                "pattern": "^[a-f0-9]{24}$",
                "description": "Application ID"
              },
              "label": {
                "type": "string",
                "maxLength": 50,
                "description": "Name of payment method shown to customers"
              },
              "icon": {
                "type": "string",
                "maxLength": 255,
                "format": "uri",
                "description": "Payment icon image URI"
              },
              "intermediator": {
                "type": "object",
                "additionalProperties": false,
                "required": ["code"],
                "properties": {
                  "name": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "Name of payment intermediator"
                  },
                  "link": {
                    "type": "string",
                    "maxLength": 255,
                    "format": "uri",
                    "description": "URI to intermediator website"
                  },
                  "code": {
                    "type": "string",
                    "minLength": 6,
                    "maxLength": 70,
                    "pattern": "^[a-z0-9_]+$",
                    "description": "Gateway name standardized as identification code"
                  }
                },
                "description": "Payment intermediator"
              },
              "payment_url": {
                "type": "string",
                "maxLength": 255,
                "format": "uri",
                "description": "Base URI to payments"
              }
            },
            "description": "Payment method (by application) chosen by customer"
          },
          "intermediator": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "transaction_id": {
                "type": "string",
                "maxLength": 255,
                "description": "Transaction ID in the intermediator"
              },
              "transaction_code": {
                "type": "string",
                "maxLength": 255,
                "description": "Transaction code in the intermediator"
              },
              "transaction_reference": {
                "type": "string",
                "maxLength": 255,
                "description": "Transaction reference code"
              },
              "payment_method": {
                "type": "object",
                "required": ["code"],
                "additionalProperties": false,
                "properties": {
                  "code": {
                    "type": "string",
                    "maxLength": 100,
                    "description": "Payment method code"
                  },
                  "name": {
                    "type": "string",
                    "maxLength": 200,
                    "description": "Short description for payment method"
                  }
                },
                "description": "Payment method as defined by intermediator"
              },
              "buyer_id": {
                "type": "string",
                "maxLength": 255,
                "description": "ID of customer account in the intermediator"
              }
            },
            "description": "Transaction properties in the intermediator"
          },
          "credit_card": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "holder_name": {
                "type": "string",
                "maxLength": 100,
                "description": "Full name of the holder, as it is on the credit card"
              },
              "avs_result_code": {
                "type": ["string", "null"],
                "maxLength": 1,
                "pattern": "^[A-Z]$",
                "description": "Response code from AVS: http://www.emsecommerce.net/avs_cvv2_response_codes.htm"
              },
              "cvv_result_code": {
                "type": ["string", "null"],
                "maxLength": 1,
                "pattern": "^[A-Z]$",
                "description": "Response code from credit card company, such as AVS result code"
              },
              "bin": {
                "type": "integer",
                "min": 1,
                "max": 9999999,
                "description": "Issuer identification number (IIN), known as bank identification number (BIN)"
              },
              "company": {
                "type": "string",
                "maxLength": 100,
                "description": "Credit card issuer name, eg.: Visa, American Express, MasterCard"
              },
              "last_digits": {
                "type": "string",
                "maxLength": 4,
                "pattern": "^[0-9]+$",
                "description": "Last digits (up to 4) of credit card number"
              },
              "token": {
                "type": "string",
                "maxLength": 255,
                "description": "Unique credit card token"
              },
              "error_code": {
                "type": "string",
                "enum": [
                  "incorrect_number",
                  "invalid_number",
                  "invalid_expiry_date",
                  "invalid_cvc",
                  "expired_card",
                  "incorrect_cvc",
                  "incorrect_zip",
                  "incorrect_address",
                  "card_declined",
                  "processing_error",
                  "call_issuer",
                  "pick_up_card"
                ],
                "description": "Credit card processing standardized error code"
              }
            },
            "description": "Credit card data, if payment was done with credit card"
          },
          "banking_billet": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "code": {
                "type": "string",
                "maxLength": 200,
                "description": "Ticket code, generally a barcode number"
              },
              "valid_thru": {
                "type": "string",
                "format": "date-time",
                "description": "Date and time of expiration, in ISO 8601 standard representation"
              },
              "text_lines": {
                "type": "array",
                "maxItems": 5,
                "items": {
                  "type": "string",
                  "maxLength": 255,
                  "description": "Phrase or paragraph"
                },
                "description": "Text lines on ticket"
              },
              "link": {
                "type": "string",
                "maxLength": 255,
                "format": "uri",
                "description": "Direct link (URI) to banking billet"
              }
            },
            "description": "Banking billet data, if payment was done with banking billet"
          },
          "loyalty_points": {
            "type": "object",
            "required": ["program_id", "points_value"],
            "additionalProperties": false,
            "properties": {
              "name": {
                "type": "string",
                "maxLength": 50,
                "description": "The name of the loyalty points program"
              },
              "program_id": {
                "type": "string",
                "pattern": "^[a-z0-9_]{2,30}$",
                "description": "Unique identifier, program name using only lowercase, numbers and underscore"
              },
              "points_value": {
                "type": "number",
                "minimum": 0,
                "maximum": 999999999,
                "description": "Number of loyalty points applied from customer account"
              },
              "ratio": {
                "type": "number",
                "minimum": 0,
                "maximum": 9999,
                "description": "The ratio of a point when converted to currency"
              }
            },
            "description": "If paid with loyalty points, specify how many points and what program was consumed"
          },
          "currency_id": {
            "type": "string",
            "pattern": "^[A-Z]{3}$",
            "description": "Currency ID specific for this transaction, if different of order currency ID"
          },
          "currency_symbol": {
            "type": "string",
            "maxLength": 20,
            "description": "Currency symbol specific for this transaction"
          },
          "discount": {
            "type": "number",
            "minimum": -999999999,
            "maximum": 999999999,
            "description": "Discount by payment method, negative if value was additionated (not discounted)"
          },
          "amount": {
            "type": "number",
            "minimum": 0,
            "maximum": 9999999999,
            "description": "Transaction amount, disregarding installment rates"
          },
          "installments": {
            "type": "object",
            "required": ["number"],
            "additionalProperties": false,
            "properties": {
              "number": {
                "type": "integer",
                "minimum": 1,
                "maximum": 199,
                "description": "Number of installments"
              },
              "value": {
                "type": "number",
                "minimum": 0,
                "maximum": 9999999999,
                "description": "Installment value"
              },
              "tax": {
                "type": "boolean",
                "default": false,
                "description": "Tax applied"
              },
              "total": {
                "type": "number",
                "minimum": 0,
                "maximum": 9999999999,
                "description": "Total value, sum of all plots"
              }
            },
            "description": "Installments option"
          },
          "creditor_fees": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "installment": {
                "type": "number",
                "minimum": 0,
                "maximum": 99999999,
                "description": "Installment fee"
              },
              "operational": {
                "type": "number",
                "minimum": 0,
                "maximum": 99999999,
                "description": "Operation fee"
              },
              "intermediation": {
                "type": "number",
                "minimum": 0,
                "maximum": 99999999,
                "description": "Intermediation fee, if transaction have an intermediary"
              },
              "other": {
                "type": "number",
                "minimum": 0,
                "maximum": 99999999,
                "description": "Sum of other transaction rates"
              }
            },
            "description": "Cost data collected"
          },
          "status": {
            "type": "object",
            "additionalProperties": false,
            "required": ["current"],
            "properties": {
              "updated_at": {
                "type": "string",
                "format": "date-time",
                "description": "Last status change, date and time in ISO 8601 standard representation"
              },
              "current": {
                "type": "string",
                "enum": [
                  "pending",
                  "under_analysis",
                  "authorized",
                  "unauthorized",
                  "paid",
                  "in_dispute",
                  "refunded",
                  "voided",
                  "unknown"
                ],
                "default": "pending",
                "description": "Payment status"
              }
            },
            "description": "Financial status and date of change"
          },
          "items": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 3000,
            "items": {
              "type": "string",
              "pattern": "^[a-f0-9]{24}$",
              "description": "Item ID"
            },
            "description": "List of order items related with this transaction, use only if items are divided"
          },
          "flags": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 10,
            "items": {
              "type": "string",
              "maxLength": 25,
              "description": "Flag title"
            },
            "description": "Flags to associate additional info"
          },
          "custom_fields": {
            "type": "array",
            "maxItems": 10,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["field", "value"],
              "properties": {
                "field": {
                  "type": "string",
                  "maxLength": 50,
                  "description": "Field name"
                },
                "value": {
                  "type": "string",
                  "maxLength": 255,
                  "description": "Field value"
                }
              },
              "description": "Custom field object"
            },
            "description": "List of custom fields"
          },
          "notes": {
            "type": "string",
            "maxLength": 8000,
            "description": "Optional notes with additional info about this transaction"
          }
        },
        "description": "Order payment transaction"
      },
      "description": "List of payment transactions for this order"
    },
    "payments_history": {
      "type": "array",
      "maxItems": 3000,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id", "status"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Unique ID (ObjectID)"
          },
          "transaction_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "ID of transaction related with this event"
          },
          "date_time": {
            "type": "string",
            "format": "date-time",
            "description": "Date and time of the event, in ISO 8601 standard representation"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "under_analysis",
              "authorized",
              "unauthorized",
              "paid",
              "in_dispute",
              "refunded",
              "voided",
              "unknown"
            ],
            "description": "Payment status"
          },
          "notification_code": {
            "type": "string",
            "maxLength": 255,
            "description": "Code of received notification with this status change"
          },
          "customer_notified": {
            "type": "boolean",
            "default": false,
            "description": "If customer was already notified of this event"
          },
          "flags": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 10,
            "items": {
              "type": "string",
              "maxLength": 25,
              "description": "Flag title"
            },
            "description": "Flags to associate additional info"
          }
        },
        "description": "History record (event)"
      },
      "description": "Historical of payments and financial status changes"
    },
    "fulfillments": {
      "type": "array",
      "maxItems": 3000,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id", "status"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Unique ID (ObjectID)"
          },
          "shipping_line_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "ID of shipping line related with this event"
          },
          "date_time": {
            "type": "string",
            "format": "date-time",
            "description": "Date and time of the event, in ISO 8601 standard representation"
          },
          "status": {
            "type": "string",
            "enum": [
              "invoice_issued",
              "in_production",
              "in_separation",
              "ready_for_shipping",
              "shipped",
              "delivered",
              "returned_for_exchange",
              "received_for_exchange",
              "returned"
            ],
            "description": "Fulfillment status"
          },
          "notification_code": {
            "type": "string",
            "maxLength": 255,
            "description": "Code of received notification with this status change"
          },
          "customer_notified": {
            "type": "boolean",
            "default": false,
            "description": "If customer was already notified of this event"
          },
          "flags": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 10,
            "items": {
              "type": "string",
              "maxLength": 25,
              "description": "Flag title"
            },
            "description": "Flags to associate additional info"
          }
        },
        "description": "History record (event)"
      },
      "description": "Fulfillment and tracking events"
    },
    "items": {
      "type": "array",
      "maxItems": 3000,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id", "product_id", "quantity", "price"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Unique ID (ObjectID)"
          },
          "product_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Product ID"
          },
          "variation_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "ID to specify the variation added to cart, if product has variations"
          },
          "sku": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100,
            "pattern": "^[A-Za-z0-9-_.]+$",
            "description": "Product or variation unique reference code"
          },
          "name": {
            "type": "string",
            "maxLength": 255,
            "description": "Product or variation full name, or other label for this cart item"
          },
          "picture": {
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
              "^small|normal|big|zoom|custom$": {
                "type": "object",
                "required": ["url"],
                "additionalProperties": false,
                "properties": {
                  "url": {
                    "type": "string",
                    "maxLength": 255,
                    "format": "uri",
                    "description": "Image link"
                  },
                  "size": {
                    "type": "string",
                    "maxLength": 11,
                    "pattern": "^[1-9]([0-9]+)?x[1-9]([0-9]+)?$",
                    "description": "Image size (width x height) in px, such as 100x50 (100px width, 50px height)"
                  },
                  "alt": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "Alternative text, HTML alt tag (important for SEO)"
                  }
                },
                "description": "Image size variation"
              }
            },
            "description": "Product or variation picture for this cart item"
          },
          "customizations": {
            "type": "array",
            "maxItems": 100,
            "items": {
              "type": "object",
              "required": ["_id", "option"],
              "additionalProperties": false,
              "properties": {
                "_id": {
                  "type": "string",
                  "pattern": "^[a-f0-9]{24}$",
                  "description": "Customization field ID"
                },
                "label": {
                  "type": "string",
                  "maxLength": 70,
                  "description": "Title for this customization field, can be the grid title"
                },
                "option": {
                  "type": "object",
                  "required": ["text"],
                  "additionalProperties": false,
                  "properties": {
                    "option_id": {
                      "type": "string",
                      "pattern": "^[a-z0-9_]{2,30}$",
                      "description": "Identify option if it was predefined (not custom value created by customer)"
                    },
                    "text": {
                      "type": "string",
                      "maxLength": 70,
                      "description": "Option text value displayed for the client"
                    },
                    "colors": {
                      "type": "array",
                      "maxItems": 6,
                      "items": {
                        "type": "string",
                        "pattern": "^#[a-f0-9]{6}$",
                        "description": "RGB code with #"
                      },
                      "description": "Option color palette (if the field involves colors), starting by main color"
                    }
                  },
                  "description": "Option chosen or created by customer"
                },
                "attachment": {
                  "type": "string",
                  "maxLength": 255,
                  "format": "uri",
                  "description": "URL of file attached by customer to this field"
                },
                "add_to_price": {
                  "type": "object",
                  "required": ["addition"],
                  "additionalProperties": false,
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["percentage", "fixed"],
                      "default": "percentage",
                      "description": "Type of price addition"
                    },
                    "addition": {
                      "type": "number",
                      "minimum": -99999999,
                      "maximum": 99999999,
                      "description": "Additional value, could be negative"
                    }
                  },
                  "description": "Price alteration due to this customization"
                }
              },
              "description": "Customization field"
            },
            "description": "Item customization fields"
          },
          "kit_product": {
            "type": "object",
            "additionalProperties": false,
            "required": ["_id"],
            "properties": {
              "_id": {
                "type": "string",
                "pattern": "^[a-f0-9]{24}$",
                "description": "Kit product ID"
              },
              "name": {
                "type": "string",
                "maxLength": 255,
                "description": "Kit product full name"
              },
              "pack_quantity": {
                "type": "number",
                "minimum": 0,
                "maximum": 9999999,
                "description": "Total quantity of items to close a kit unit"
              },
              "price": {
                "type": "number",
                "minimum": 0,
                "maximum": 999999999,
                "description": "Kit total pack price"
              },
              "composition": {
                "type": "array",
                "maxItems": 100,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["_id"],
                  "properties": {
                    "_id": {
                      "type": "string",
                      "pattern": "^[a-f0-9]{24}$",
                      "description": "Product ID"
                    },
                    "variation_id": {
                      "type": "string",
                      "pattern": "^[a-f0-9]{24}$",
                      "description": "Selected variation ID if any"
                    },
                    "quantity": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 9999999,
                      "description": "Kit item quantity"
                    }
                  },
                  "description": "One of the kit items"
                },
                "description": "Current kit composition"
              }
            },
            "description": "Parent kit product for this item"
          },
          "gift_wrap": {
            "type": "object",
            "required": ["label"],
            "additionalProperties": false,
            "properties": {
              "tag": {
                "type": "string",
                "maxLength": 20,
                "pattern": "^[a-z0-9_]+$",
                "description": "Tag to identify object, use only lowercase letters, digits and underscore"
              },
              "label": {
                "type": "string",
                "maxLength": 70,
                "description": "Title describing this gift wrap"
              },
              "add_to_price": {
                "type": "number",
                "minimum": 0,
                "maximum": 99999999,
                "description": "Additional value due to this gift wrap"
              }
            },
            "description": "Gift wrap chosen by customer"
          },
          "quantity": {
            "type": "number",
            "minimum": 0,
            "maximum": 9999999,
            "description": "Item quantity in cart"
          },
          "stock_status": {
            "type": "string",
            "enum": [
              "pending",
              "released",
              "returned",
              "unmanaged",
              "out_of_stock",
              "__releasing"
            ],
            "default": "pending",
            "description": "Item stock management state respective to order status"
          },
          "price": {
            "type": "number",
            "minimum": 0,
            "maximum": 999999999,
            "description": "Product sale price specifically for this cart"
          },
          "final_price": {
            "type": "number",
            "minimum": 0,
            "maximum": 999999999,
            "description": "Final item price including additions due to customizations and gift wrap"
          },
          "flags": {
            "type": "array",
            "uniqueItems": true,
            "maxItems": 10,
            "items": {
              "type": "string",
              "maxLength": 25,
              "description": "Flag title"
            },
            "description": "Flags to associate additional info"
          }
        },
        "description": "One of the order items"
      },
      "description": "Products composing the order"
    },
    "extra_discount": {
      "type": "object",
      "required": ["value"],
      "additionalProperties": false,
      "properties": {
        "discount_coupon": {
          "type": "string",
          "maxLength": 255,
          "description": "Text of discount coupon applied by customer"
        },
        "value": {
          "type": "number",
          "minimum": 0,
          "maximum": 9999999999,
          "description": "Extra discount value"
        },
        "app": {
          "type": "object",
          "additionalProperties": false,
          "required": ["_id"],
          "properties": {
            "_id": {
              "type": "string",
              "pattern": "^[a-f0-9]{24}$",
              "description": "Application ID"
            },
            "label": {
              "type": "string",
              "maxLength": 100,
              "description": "Name of the discount rule, can be the coupon or campaign name"
            },
            "description": {
              "type": "string",
              "maxLength": 1000,
              "description": "Additional text description for the discount rule"
            }
          },
          "description": "Extra discount rule (by application)"
        },
        "flags": {
          "type": "array",
          "uniqueItems": true,
          "maxItems": 10,
          "items": {
            "type": "string",
            "maxLength": 25,
            "description": "Flag title"
          },
          "description": "Flags to associate additional info"
        }
      },
      "description": "Extra discount applied by coupon or UTM campaign"
    },
    "subscription_order": {
      "type": "object",
      "additionalProperties": false,
      "required": ["_id"],
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-f0-9]{24}$",
          "description": "Parent order ID"
        },
        "number": {
          "type": "integer",
          "min": 1,
          "max": 999999999,
          "description": "Parent order number"
        }
      },
      "description": "Original subscription (recurrence) order"
    },
    "metafields": {
      "type": "array",
      "maxItems": 100,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id", "value"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Unique ID (ObjectID)"
          },
          "namespace": {
            "type": "string",
            "maxLength": 30,
            "description": "String to help distinguish who (or which app) created and can use the metafield"
          },
          "field": {
            "type": "string",
            "maxLength": 50,
            "description": "Field name"
          },
          "value": {
            "type": "string",
            "maxLength": 255,
            "description": "Custom property value"
          }
        },
        "description": "Custom attribute object"
      },
      "description": "List of custom attributes"
    },
    "hidden_metafields": {
      "type": "array",
      "maxItems": 100,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id", "value"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Unique ID (ObjectID)"
          },
          "namespace": {
            "type": "string",
            "maxLength": 30,
            "description": "String to help distinguish who (or which app) created and can use the metafield"
          },
          "field": {
            "type": "string",
            "maxLength": 50,
            "description": "Field name"
          },
          "value": {
            "type": "string",
            "maxLength": 255,
            "description": "Custom property value"
          }
        },
        "description": "Custom attribute object"
      },
      "description": "List of custom attributes"
    },
    "private_metafields": {
      "type": "array",
      "maxItems": 100,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["_id", "value"],
        "properties": {
          "_id": {
            "type": "string",
            "pattern": "^[a-f0-9]{24}$",
            "description": "Unique ID (ObjectID)"
          },
          "namespace": {
            "type": "string",
            "maxLength": 30,
            "description": "String to help distinguish who (or which app) created and can use the metafield"
          },
          "field": {
            "type": "string",
            "maxLength": 50,
            "description": "Field name"
          },
          "value": {
            "type": "string",
            "maxLength": 255,
            "description": "Custom property value"
          }
        },
        "description": "Custom attribute object"
      },
      "description": "List of custom attributes, hidden by default, visible for the order buyers"
    },
    "flags": {
      "type": "array",
      "uniqueItems": true,
      "maxItems": 10,
      "items": {
        "type": "string",
        "maxLength": 25,
        "description": "Flag title"
      },
      "description": "Flags to associate additional info"
    },
    "notes": {
      "type": "string",
      "maxLength": 255,
      "description": "Optional notes with additional info about this order"
    },
    "staff_notes": {
      "type": "string",
      "maxLength": 255,
      "description": "Description and notes about this order, available only for shop administrators"
    }
  }
}
